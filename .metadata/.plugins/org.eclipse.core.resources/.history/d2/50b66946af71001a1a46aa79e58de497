/*
 * Annuaire.cpp
 *
 *  Created on: 2020-03-21
 *      Author: etudiant
 */

#include "Annuaire.h"
#include "validationFormat.h"
#include <sstream>
#include <iostream>
#include "Date.h"

using namespace std;
using namespace util;

namespace hockey
{

    Annuaire::Annuaire(string p_nomClub): m_nomClub(p_nomClub)
	{
    	for( unsigned i = 0; i < m_vMembres.size();i++)
    	  {
    	    m_vMembres[i]= NULL;
    	  }
    	INVARIANTS();
	}


    Annuaire::Annuaire(const Annuaire& p_Annuaire):m_nomClub(p_Annuaire.reqNomClub())
    {
    	for( unsigned i = 0; i < m_vMembres.size();i++)
    	{
    	   m_vMembres[i]= p_Annuaire.m_vMembres[i];
    	}
    	INVARIANTS();
    }

    Annuaire::~Annuaire()
    {

    }

    const string& Annuaire::reqNomClub() const
     {
    	return m_nomClub;
     }

    /**
     * \brief retourne les éléments de la pile contenus dans un vecteur de pointeurs a personne
     * \returnun vecteur de pointeurs a personne, copie du contenu de la pile (retour par valeur)
    */

    const vector<Personne*>& Annuaire::reqAnnuaireList() const
    {
    	return m_vMembres;
    }


    void Annuaire::ajouterPersonne(const Personne& p_personne)
    {
    	m_vMembres.push_back(p_personne.clone());
    }

    void Annuaire :: verifieInvariant() const
     {
      	 INVARIANT(!reqNomClub().empty());
     }


    string Annuaire::reqAnnuaireFormate() const
    {
       ostringstream os;
       os << "Club              : ";
       os<< reqNomClub()<< endl;
       os << "------------------: "<<endl;

      for( unsigned i = 0; i < m_vMembres.size();i++)
      {
    	 os<< (m_vMembres[i]->reqPesonneFormatee());
    	 os << "------------------: "<<endl;
      }
         return os.str();
    }

}


